---
π“… **λ‚ μ§**: 2025λ…„ 4μ›” 2μΌ (μ)
π‘¤ **μ‘μ„±μ**: κ°•μ² μ› (μ—°κµ¬μ±…μ„μ) | **μΉμΈ**: κ°•νλ¦Ό (λ€ν‘)
π“ **μ§„ν–‰ λ‹¨κ³„**: 3λ‹¨κ³„ - κ³ λ„ν™” λ° μ‚¬μ—…ν™”
π― **μ£Όμ” μ‘μ—…**: λ¨μ ν•΄ν‚Ή μν–‰ (2μΌμ°¨) λ° μ΅°μΉ
---

# AI κΈ°λ° λ‹¤κµ­μ–΄ μμ„± ν•©μ„± λ° μ‹¤μ‹κ°„ λ¦½μ‹±ν¬ λ”λΉ™ μ‹μ¤ν… κ°λ°μΌμ§€

## π“‹ μ¤λμ μ‘μ—… λ‚΄μ©

### 1. κ¶ν• μƒμΉ κ³µκ²© μ‹λ„

- **μ‹λ‚λ¦¬μ¤**: μΌλ° μ‚¬μ©μ ν† ν°μΌλ΅ `/api/admin/users` νΈμ¶.
- **κ²°κ³Ό**: `403 Forbidden` μ‘λ‹µ (μ •μƒ λ°©μ–΄).
- **μ·¨μ•½μ **: URL νλΌλ―Έν„° λ³€μ΅°(`user_id` λ³€κ²½)λ΅ νƒ€μΈμ μ£Όλ¬Έ λ‚΄μ—­ μ΅°ν κ°€λ¥(IDOR).
- **μ΅°μΉ**: API μ—”λ“ν¬μΈνΈμ—μ„ μ”μ²­μμ™€ λ¦¬μ†μ¤ μ†μ μ μΌμΉ μ—¬λ¶€ κ²€μ¦ λ΅μ§ μ¶”κ°€.

### 2. API Rate Limiting μ°ν μ‹λ„

- **μ‹λ‚λ¦¬μ¤**: IPλ¥Ό λ³€μ΅°ν•λ©° λ€λ‰ μ”μ²­.
- **κ²°κ³Ό**: `X-Forwarded-For` ν—¤λ”λ¥Ό μ‹ λΆ°ν•μ—¬ IP μ¤ν‘Έν•‘ κ°€λ¥μ„± ν™•μΈ.
- **μ΅°μΉ**: Nginxμ—μ„ `Real-IP` λ¨λ“ μ„¤μ • κ°•ν™”.

## π”§ κΈ°μ μ  μ§„ν–‰μ‚¬ν•­

### IDOR λ°©μ–΄ μ½”λ“

```python
def get_order(order_id: int, current_user: User):
    order = db.query(Order).get(order_id)
    if order.user_id != current_user.id:
        raise HTTPException(status_code=403, detail="Not authorized")
    return order
```

## π“ μ§„ν–‰ μƒν™©

| ν•­λ© | κ³„ν | μ‹¤μ  | μƒνƒ |
|------|------|------|------|
| κ¶ν• μ κ²€ | μ™„λ£ | μ™„λ£ | β… |
| IDOR μ΅°μΉ | μ™„λ£ | μ™„λ£ | β… |

## π§ μ΄μ μ‚¬ν•­ λ° ν•΄κ²° λ°©μ•

- **νΉμ΄μ‚¬ν•­ μ—†μ**: μ£Όμ” μ·¨μ•½μ  μ΅°μΉ μ™„λ£.

## π“ λ‚΄μΌ κ³„ν

1. λ³΄μ• κ°μ‚¬ λ³΄κ³ μ„ μ‘μ„±
2. μ›ν„°λ§ν‚Ή κΈ°μ  μ΅°μ‚¬ (Invisible Watermark)

---

## π“ μ°Έκ³  μλ£

- [1] "IDOR Prevention". [Link](https://cheatsheetseries.owasp.org/cheatsheets/Insecure_Direct_Object_Reference_Prevention_Cheat_Sheet.html)

<details>
<summary>IRIS λ¶™μ—¬λ„£κΈ°μ© HTML μ½”λ“</summary>

```html
<h3>1. κ¶ν• μƒμΉ κ³µκ²© μ‹λ„</h3>
<ul>
<li><strong>μ‹λ‚λ¦¬μ¤</strong>: μΌλ° μ‚¬μ©μ ν† ν°μΌλ΅ <code>/api/admin/users</code> νΈμ¶.</li>
<li><strong>κ²°κ³Ό</strong>: <code>403 Forbidden</code> μ‘λ‹µ (μ •μƒ λ°©μ–΄).</li>
<li><strong>μ·¨μ•½μ </strong>: URL νλΌλ―Έν„° λ³€μ΅°(<code>user_id</code> λ³€κ²½)λ΅ νƒ€μΈμ μ£Όλ¬Έ λ‚΄μ—­ μ΅°ν κ°€λ¥(IDOR).</li>
<li><strong>μ΅°μΉ</strong>: API μ—”λ“ν¬μΈνΈμ—μ„ μ”μ²­μμ™€ λ¦¬μ†μ¤ μ†μ μ μΌμΉ μ—¬λ¶€ κ²€μ¦ λ΅μ§ μ¶”κ°€.</li>
</ul>
<h3>2. API Rate Limiting μ°ν μ‹λ„</h3>
<ul>
<li><strong>μ‹λ‚λ¦¬μ¤</strong>: IPλ¥Ό λ³€μ΅°ν•λ©° λ€λ‰ μ”μ²­.</li>
<li><strong>κ²°κ³Ό</strong>: <code>X-Forwarded-For</code> ν—¤λ”λ¥Ό μ‹ λΆ°ν•μ—¬ IP μ¤ν‘Έν•‘ κ°€λ¥μ„± ν™•μΈ.</li>
<li><strong>μ΅°μΉ</strong>: Nginxμ—μ„ <code>Real-IP</code> λ¨λ“ μ„¤μ • κ°•ν™”.</li>
</ul>
```

</details>
