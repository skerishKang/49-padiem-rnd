---
📅 **날짜**: 2025년 5월 21일 (수)
👤 **작성자**: 강철원 (연구책임자) | **승인**: 강혜림 (대표)
📊 **진행 단계**: 3단계 - 고도화 및 사업화
🎯 **주요 작업**: 모니터링 시스템 개선
---

# AI 기반 다국어 음성 합성 및 실시간 립싱크 더빙 시스템 개발일지

## 📋 오늘의 작업 내용

### 1. Grafana 대시보드 고도화

- **기존**: 기본적인 CPU, 메모리 사용량만 표시.
- **추가**:
  - **API Latency**: 엔드포인트별 평균 응답 시간.
  - **Error Rate**: 4xx, 5xx 에러 발생 비율.
  - **Business Metrics**: 일일 가입자 수, 더빙 생성 횟수, 결제 금액.

### 2. Loki 로그 연동

- 분산된 서버 로그를 Loki로 수집하여 Grafana에서 통합 검색 가능하도록 설정.
- `TraceID`를 통해 요청의 전체 흐름 추적.

## 🔧 기술적 진행사항

### Promtail 설정 (Docker)

```yaml
scrape_configs:
  - job_name: system
    static_configs:
      - targets:
          - localhost
        labels:
          job: varlogs
          __path__: /var/log/*log
```

## 📊 진행 상황

| 항목 | 계획 | 실제 | 상태 |
|------|------|------|------|
| 대시보드 개선 | 완료 | 완료 | ✅ |
| Loki 연동 | 완료 | 완료 | ✅ |

## 🚧 이슈 사항 및 해결 방안

- **스토리지 용량**: 로그 데이터가 빠르게 증가. -> 보관 주기(Retention Period)를 30일로 설정.

## 📝 내일 계획

1. 부하 테스트 재수행 (글로벌 환경 가정)
2. 장애 복구 훈련 (Chaos Engineering)

---

## 📚 참고 자료

- [1] "Grafana Loki". [Link](https://grafana.com/oss/loki/)

<details>
<summary>IRIS 붙여넣기용 HTML 코드</summary>

```html
<h3>1. Grafana 대시보드 고도화</h3>
<ul>
<li><strong>기존</strong>: 기본적인 CPU, 메모리 사용량만 표시.</li>
<li><strong>추가</strong>:
<ul>
<li><strong>API Latency</strong>: 엔드포인트별 평균 응답 시간.</li>
<li><strong>Error Rate</strong>: 4xx, 5xx 에러 발생 비율.</li>
<li><strong>Business Metrics</strong>: 일일 가입자 수, 더빙 생성 횟수, 결제 금액.</li>
</ul>
</li>
</ul>
<h3>2. Loki 로그 연동</h3>
<ul>
<li>분산된 서버 로그를 Loki로 수집하여 Grafana에서 통합 검색 가능하도록 설정.</li>
<li><code>TraceID</code>를 통해 요청의 전체 흐름 추적.</li>
</ul>
```

</details>
