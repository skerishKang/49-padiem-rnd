---
📅 **날짜**: 2025년 7월 9일 (수)
👤 **작성자**: 강철원 (연구책임자) | **승인**: 강혜림 (대표)
📊 **진행 단계**: 3단계 - 고도화 및 사업화
🎯 **주요 작업**: 백엔드 세그먼트 처리
---

# AI 기반 다국어 음성 합성 및 실시간 립싱크 더빙 시스템 개발일지

## 📋 오늘의 작업 내용

### 1. 처리 로직

1. 원본 영상을 세그먼트 단위로 자름 (Trim).
2. 선택되지 않은 구간은 그대로 둠.
3. 선택된 구간만 AI 파이프라인(STT -> Trans -> TTS -> LipSync) 통과.
4. 처리된 구간과 원본 구간을 순서대로 병합 (Concat).

### 2. 병합 테스트

- **시나리오**: 1분 영상 중 10~20초, 40~50초 구간만 더빙.
- **결과**: 영상과 오디오 싱크 정확함. 전환 부분에서 튀는 현상(Pop noise) 없음.

## 🔧 기술적 진행사항

### Python Logic

```python
parts = []
last_end = 0
for seg in segments:
    # 원본 구간 (앞부분)
    parts.append(trim_video(original, last_end, seg['start']))
    # 더빙 구간
    dubbed_part = process_pipeline(trim_video(original, seg['start'], seg['end']))
    parts.append(dubbed_part)
    last_end = seg['end']
# 남은 뒷부분
parts.append(trim_video(original, last_end, duration))
# 병합
final = concat_videos(parts)
```

## 📊 진행 상황

| 항목 | 계획 | 실제 | 상태 |
|------|------|------|------|
| 로직 구현 | 완료 | 완료 | ✅ |
| 병합 테스트 | 완료 | 완료 | ✅ |

## 🚧 이슈 사항 및 해결 방안

- **처리 시간**: 전체를 다 하는 것보다 빠르지만, 병합 과정에서 인코딩 시간이 소요됨. -> `ffmpeg -c copy`가 가능한 경우(코덱 동일)에는 스트림 복사로 속도 향상.

## 📝 내일 계획

1. UI/UX 다듬기
2. 주간 성과 정리 준비

---

## 📚 참고 자료

- [1] "MoviePy Concatenation". [Link](https://zulko.github.io/moviepy/ref/VideoClip.html#concatenate-videoclips)

<details>
<summary>IRIS 붙여넣기용 HTML 코드</summary>

```html
<h3>1. 처리 로직</h3>
<ol>
<li>원본 영상을 세그먼트 단위로 자름 (Trim).</li>
<li>선택되지 않은 구간은 그대로 둠.</li>
<li>선택된 구간만 AI 파이프라인(STT -&gt; Trans -&gt; TTS -&gt; LipSync) 통과.</li>
<li>처리된 구간과 원본 구간을 순서대로 병합 (Concat).</li>
</ol>
<h3>2. 병합 테스트</h3>
<ul>
<li><strong>시나리오</strong>: 1분 영상 중 10~20초, 40~50초 구간만 더빙.</li>
<li><strong>결과</strong>: 영상과 오디오 싱크 정확함. 전환 부분에서 튀는 현상(Pop noise) 없음.</li>
</ul>
```

</details>
