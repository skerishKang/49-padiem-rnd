# 연구노트 (책임자 관점)

- **날짜**: 2024-10-09 (수)
- **작성자**: 강혜림
- **역할**: 책임연구원
- **진행 단계**: 1단계 기초연구·설계
- **아젠다**: 전체 시스템 아키텍처 초안, 모듈·데이터 명세 방향 정리

---

## 1. 오늘 정한 핵심 방향

1. **서비스/시스템 5계층 구조 합의**
   - 입력(음성·자막·영상) → 전처리/AI 처리 → 출력/후처리 → 데이터베이스 → UI·API 의 5계층 구조로 정리.
   - 각 계층은 최대한 **모듈화 + 마이크로서비스** 관점으로 분리하되, 과제 범위 내에서 과도한 분산은 피하는 것으로 정함.

2. **모듈 경계 및 마이크로서비스 전략**
   - RVC, STT, TTS, Wav2Lip 등 AI 모듈은 **독립 모듈**로 설계하되, orchestration 레이어에서만 조합.
   - 초기에는 단일 리포지토리(monorepo) 내 모듈 분리, 이후 필요 시 서비스 분리까지 확장 가능하도록 여지를 둠.

3. **공통 메타데이터 키 설계 방향**
   - 상·하위 모듈 간에 공통으로 사용하는 **메타데이터 키(예: task_id, run_id, media_type, language, segment_id 등)** 를 JSON 기반으로 통일.
   - 이후 IRIS 보고/추적, QA, 리허설 로그를 이 키들을 기준으로 묶어서 볼 수 있도록 하는 것을 목표로 설정.

4. **중간 산출물 저장 전략**
   - 음성, 자막, 중간 피처 등은 **객체 스토리지(S3 계열)** 를 기본으로 하고, DB에는 경로/메타 정보만 저장하는 구조로 설계.
   - 이렇게 해야 후반에 용량 증가·백업·복구·IRIS 재제출 요구에 대응하기 쉬움.

5. **품질/성능 관점의 상위 요구사항 재확인**
   - IRIS 연구계획서 상의 정량 지표(처리 시간, 자막·립싱 정합도, 화자 보존 등)를 **아키텍처 단계에서부터 고려**하기로 함.
   - 특히, end-to-end 지연시간 500ms 이하(실시간성에 가까운 응답)를 목표로 두고, GPU 자원·배포 구조를 역산하는 방향으로 설계.

---

## 2. 책임자 관점 메모 (의사결정·리스크)

- **기술 스택·구조 상의 선택**
  - gRPC, 객체 스토리지, 모듈별 독립 run 파이프라인 등은 이후 운영/유지보수에 큰 영향을 줄 선택이므로, 지금 단계에서 큰 방향을 고정.
  - 완전히 새로운 프레임워크를 도입하기보다는, 팀이 이미 익숙한 Python/FFmpeg/Streamlit/FastAPI 축을 최대한 활용하는 쪽으로 유지.

- **리스크 1: 모듈 난립 및 복잡도 증가**
  - 마이크로서비스를 과하게 쪼개면, 현재 인력 규모에서 운영 복잡도가 올라갈 수 있음.
  - → **대응**: 과제 기간 동안은 "코드 레벨 모듈화"에 집중하고, 실제 배포 단위는 소수의 서비스로 묶는 전략을 우선.

- **리스크 2: 메타데이터 스키마 변경 비용**
  - 초기에 메타데이터 스키마를 잘못 잡으면, 나중에 각 모듈·DB·리포트에서 일괄 수정 비용이 커짐.
  - → **대응**: 10월 안에 최소 2~3번 iteration 을 돌려보고, 11월부터는 큰 변경 없이 확장·보완 위주로 갈 수 있도록 계획.

- **리스크 3: IRIS 산출물 형식과의 정합성**
  - 지금 설계하는 구조가 IRIS 최종보고서·체크리스트 포맷과 괴리가 생기면, 말기(제출 단계)에 문서 작업 부담이 급증할 수 있음.
  - → **대응**: 초기부터 IRIS 양식(PART1~3)을 보면서, 아키텍처 다이어그램과 용어를 문서와 맞추는 방향으로 설계.

---

## 3. 10월 이후 액션 아이템 (책임 관점)

1. **10/10 ~ 10/15**
   - 자막 입력 모듈, 품질검수(QA) 파이프라인, 테스트 데이터셋 구성 등 **입력·검증 쪽 설계**를 확정.
   - 산출물: 자막 ingest 아키텍처 문서, QA 항목 초안.

2. **10/11 ~ 10/18**
   - RVC, VALL-E X, Wav2Lip 등 AI 모듈의 **모델·파라미터 후보**를 정리하고, 목표 지표(정확도, 지연시간 등)를 수치로 합의.
   - 산출물: 모델 파라미터 표, 벤치마크 계획.

3. **10/21 ~ 10/31**
   - 전체 파이프라인의 **출력/품질 관리(체크리스트, QC 스크립트)** 를 설계하고, IRIS 제출용 품질 지표와 연결.
   - 산출물: 출력 모듈 설계 문서, QC 체크리스트 초안, 10월 말 KPI 요약.

---

## 4. 참고 링크·문서

- 과제 개요 및 목표
  - `@pdf/ocr/과제접수연구개발계획서(PART1(요약))_ocr.pdf#3-4`
- 시스템 아키텍처 초안 문서 (개발팀 작성, 책임 검토 필요)
  - `codex/docs/architecture/system_arch_v0_1.md`
  - `codex/docs/ai_pipeline/rvc_valle_x_spec.md`

> 메모: 이 노트는 2024-10-09 원본 연구노트 내용을 바탕으로, **책임연구원 관점에서 결정·리스크·후속 액션 위주로 재구성한 초안**이다. 향후 IRIS 최종보고서 및 내부 회고에 맞춰 추가 보완 예정.