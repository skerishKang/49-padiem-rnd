# 연구노트 (책임자 관점)

- **날짜**: 2024-10-18
- **작성자**: 강혜림
- **역할**: 책임연구원
- **진행 단계**: 1단계 기초연구·설계
- **아젠다**: orchestrator 기반 End-to-End 통합 테스트, 로그/모니터링 체계 구축

---

## 1. 연구 배경·목적 정리 (책임 관점)

- 개별 모듈(RVC, VALL-E X, FastPitch, Wav2Lip, 자막/출력/QC)이 어느 정도 정리된 시점에서, 실제 서비스 흐름과 유사한 **End-to-End 파이프라인**을 orchestrator로 묶어 검증하는 날.
- 목적은
  - IRIS 보고서에 들어갈 "전체 파이프라인" 구조를 실제 실행 가능한 형태로 확보하고,
  - 병목·실패패턴·로그 체계를 파악해 이후 안정화·모니터링 설계를 구체화하는 것.

---

## 2. 오늘 진행 내용 (세부)

### 2.1 orchestrator/pipeline_runner.py 업데이트
- subtitle 메타데이터, QC 리포트 경로 등 추가 필드를 입력 파라미터로 받을 수 있도록 확장.
- 실행 정책(최대 재시도 횟수, 실패 시 슬랙 알림 등)을 설정.

### 2.2 CI/CD 파이프라인 연계
- GitHub Actions에 orchestrator 통합 테스트 워크플로우를 추가.
  - 매주 금요일에 전체 파이프라인 테스트를 자동 실행.
  - 여러 시나리오를 matrix 전략으로 병렬 실행.

### 2.3 로그·모니터링 구성
- Elasticsearch + Kibana 대시보드에 orchestrator 이벤트(성공/실패/경고)를 수집.
- GPU 사용량, 처리 시간, 실패율 등 핵심 지표를 시각화.

### 2.4 통합 테스트 결과
- 총 6개 시나리오 중 5건 성공, 1건은 long clip chunk 미적용으로 실패.
- QC 리포트가 IRIS 제출용 첨부자료로 활용 가능할 정도의 형태(JSON)로 생성되는 것을 확인.

---

## 3. 책임자 관점 의사결정·리스크

- **결정 1: 주간 통합 테스트 체계**
  - 금요일 주간 통합 테스트를 고정 일정으로 두고, IRIS 리허설 전/후에 반드시 이 테스트를 통과해야만 배포하거나 리허설을 진행하는 프로세스를 도입.

- **리스크 1: Long clip 처리 실패**
  - chunked inference 미완성으로 인해 긴 clip에서 실패가 발생.
  - → **대응**: 10/21 chunked inference 구현을 최우선 과제로 두고, IRIS 중간점검 전까지 long clip 안정화.

- **리스크 2: 모니터링 복잡도**
  - Kibana 대시보드가 복잡해질 경우, 팀원들이 실제로 지표를 활용하지 못할 위험.
  - → **대응**: IRIS 관련 핵심 지표(처리시간, 실패율, 품질지표 몇 가지)에 집중한 뷰를 별도로 구성.

---

## 4. 지표·산출물 정리

- **성능 지표(초기)**
  - End-to-End 성공률: 83%(5/6).
  - 평균 처리 시간: 약 7분 20초(입력~출력~QC까지 전체).
- **시각화 산출물**
  - Kibana 대시보드 2개(파이프라인 성능, 오류 모니터링).

---

## 5. 다음 액션 (책임 관점 To-do)

1. **10/21 chunked inference 구현**
   - long clip 실패 케이스를 해결하기 위한 구조적 변경.

2. **10/24 IRIS 중간점검 리허설 준비**
   - 오늘의 통합 테스트 결과를 기반으로, IRIS 중간점검용 시연 플로우를 정제.

---

## 6. 참고 문서·링크

- IRIS 연구계획서 PART2(통합 테스트 계획).
- Elastic Observability Dashboard 관련 내부 문서.
- GitHub Actions matrix strategy 문서.

> 메모: 이 노트는 2024-10-18 원본 연구노트의 orchestrator 통합 테스트 내용을 책임자 관점에서 정리한 것이다. 이후 chunked inference 도입(10/21)과 IRIS 중간 리허설(10/24)의 기반이 된다.