# 연구노트 (책임자 관점)

- **날짜**: 2024-10-30
- **작성자**: 강혜림
- **역할**: 책임연구원
- **진행 단계**: 1단계 기초연구·설계
- **아젠다**: RBAC(권한 정책) 점검·보완, 감사 로그 강화, 보안 측면 IRIS 준비

---

## 1. 연구 배경·목적 정리 (책임 관점)

- 10/25 사용자 테스트에서 확인된 권한 이슈(일부 계정에서 설정 메뉴 비노출)를 해결하고,
  - IRIS 제출 전 보안 측면에서 문제가 없는지,
  - 권한 변경·접근 기록이 충분히 남는지
  를 점검하는 날.

---

## 2. 오늘 진행 내용 (세부)

### 2.1 권한 매핑 재정의
- `shared/auth/policies.yaml`을 검토하여, 역할(Role)과 권한(Permission) 매트릭스를 재정리.
- "설정 보기/변경" 권한을 일반 사용자 계정에도 일부 허용하되, 민감 설정(보안/비용 관련)은 별도 승인 절차를 거치도록 분리.

### 2.2 토큰 스코프·만료 정책 점검
- JWT `scope` 필드와 API Gateway에서의 권한 검증 로직을 통합적으로 검토.
- 만료 시간(`exp`)을 30분 → 15분으로 단축해, 세션이 과도하게 길게 유지되지 않도록 조정.

### 2.3 권한·감사 로그 테스트
- 테스트용 계정 2개에 대해 다양한 시나리오(설정 변경, IRIS 제출, 로그 조회 등)를 실행.
- 모든 권한 변경 이벤트에 대해 `before/after` 값과 사용자 ID가 감사 로그에 남도록 Logstash 파이프라인을 수정.

### 2.4 대시보드·리포트 점검
- Kibana에서 접근 정책 변경·권한 오류·보안 이벤트를 한눈에 볼 수 있는 Saved Search/대시보드를 구성.

---

## 3. 책임자 관점 의사결정·리스크

- **결정 1: RBAC 매트릭스 v4 확정**
  - `docs/security/rbac_matrix_v4.xlsx`를 기준으로, IRIS 제출 시점까지는 이 정책을 고정.

- **리스크 1: OAuth 리프레시 토큰 처리**
  - 일부 클라이언트에서 리프레시 토큰 만료/재발급 처리에 문제가 있을 가능성.
  - → **대응**: `token revocation` API를 추가하고, 11/2까지 클라이언트별 테스트를 완료.

- **리스크 2: 모니터링 도구 의존성**
  - Kibana/Elasticsearch 장애 시 감사 로그 확인이 지연될 수 있음.
  - → **대응**: 중요 이벤트는 별도 스냅샷(파일/백업)으로도 남기는 방안을 검토.

---

## 4. 지표·산출물 정리

- **테스트 결과**
  - 권한 시나리오 테스트 케이스 48건 전부 통과.
  - 감사 로그 latency 270ms 수준.
- **문서**
  - `rbac_matrix_v4.xlsx`.
  - Kibana Saved Search: `AccessPolicyAudit@20241030`.

---

## 5. 다음 액션 (책임 관점 To-do)

1. **10/31 10월 성과 정리 및 11월 계획 수립**
   - 보안·권한 관련 변경 사항을 10월 요약·11월 계획에 반영.

2. **11/1 IRIS 최종 리허설**
   - RBAC/보안 설정이 실제 리허설 환경에서 문제없이 동작하는지 확인.

---

## 6. 참고 문서·링크

- NIST SP 800-162, Attribute Based Access Control Guide, 2023.
- Kibana 대시보드 `AccessPolicyAudit@20241030`.

> 메모: 이 노트는 2024-10-30 원본 연구노트의 RBAC·보안 점검 내용을 책임자 관점에서 정리한 것이다. IRIS 제출 전 보안 리스크를 줄이기 위한 핵심 조치이다.