# 연구노트 (책임자 관점)

- **날짜**: 2024-11-06
- **작성자**: 강혜림
- **역할**: 책임연구원
- **진행 단계**: 2단계 서비스·운영 통합 검증
- **अ젠다**: 중국 구간 CDN 미러 구성, 네트워크·TLS 검증, 모니터링 체계 정비

---

## 1. 연구 배경·목적 (책임 관점)

- 중국 쪽 평가·협력자들이 IRIS/콘솔 접속 시 **간헐적인 속도 저하·타임아웃**을 겪고 있어, 별도 CDN 미러와 모니터링 체계를 구축.
- 목표는 중국 리전에서의 다운로드 시간(매뉴얼·첨부 ZIP 등)을 절반 수준으로 줄이고, TLS·DNS Failover 등 인프라 리스크를 낮추는 것.

---

## 2. 오늘 주요 진행 내용

### 2.1 중국 CDN 미러 구성
- Alibaba Cloud CDN 에지 2개 리전에 베이징 리전 오리진을 연결.
- ICP Filing 확인 후 `cdn-cn.padiem.ai` CNAME 발급, Geo DNS 정책 구성.

### 2.2 성능 측정
- Catchpoint, pingpe 등을 이용해 RTT, TTFB, 다운로드 속도를 30분 간격으로 측정.
- IRIS 첨부 ZIP(48MB), 매뉴얼 PDF(64p)를 대상으로 실제 체감 시간을 수집.

### 2.3 TLS·무결성 검증
- Let's Encrypt 와일드카드 인증서를 SNI 기반으로 배포.
- Edge에서 내려오는 파일의 SHA-256 해시를 Lambda@Edge로 검증하여, 오리진과 일치하는지 확인.

### 2.4 모니터링 대시보드 구성
- Grafana에 중국 리전용 패널을 추가해, 지연시간·캐시 적중률·에러율을 한눈에 볼 수 있도록 정리.
- Alertmanager에서 RTT/TTFB 800ms 초과 구간에 대해 슬랙 알림 규칙 설정.

---

## 3. 책임자 관점 의사결정·리스크

- **결정**: 중국 구간은 Alibaba CDN 미러를 기본 경로로 사용하고, 장애 시 글로벌 CDN으로 Failover.
- **리스크**:
  - 일부 ISP에서 TLS 1.3을 차단해 TLS 1.2로 폴백하는 이슈 → 보안팀과 함께 허용 가능한 최소 규격 재검토.
  - Edge 로그 타임존(UTC+8)을 내부 시스템(KST/UTC)과 맞추는 변환 로직이 필요.

---

## 4. 산출물·지표

- 중국 리전 평균 다운로드 시간: 12.4초 → 4.3초 수준으로 개선.
- 캐시 적중률: 86%, 에러율: 0.3%.
- DNS Failover 전환 시 평균 복구 시간 약 45초.

---

## 5. 다음 액션 (책임 관점)

1. 11/8: 브라우저/업무망 가이드에 중국 CDN 미러 사용 방법·주의사항 추가.
2. 11월 후반: 중국 구간 성능·안정성을 재측정해 IRIS 사후 보고서에 반영.

---

## 6. 참고 자료

- `docs/network/cn_mirror_runbook_v1.0.md`
- Alibaba Cloud CDN Best Practices, Cloudflare China Network Report.
