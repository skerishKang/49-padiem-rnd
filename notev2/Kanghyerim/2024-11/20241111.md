# 연구노트 (책임자 관점)

- **날짜**: 2024-11-11
- **작성자**: 강혜림
- **역할**: 책임연구원
- **진행 단계**: 2단계 서비스·운영 통합 검증
- **아젠다**: 품질 대시보드·자동 리포트(ETL) 구축, 경보 규칙 설계

---

## 1. 연구 배경·목적 (책임 관점)

- AI 파이프라인의 품질 지표(정확도·지연시간·사용자 만족도 등)를 **지속적으로 추적·경보**하는 체계를 만들기 위한 작업.
- IRIS KPI와 내부 운영 지표를 연결해, 문제가 커지기 전에 사전 탐지할 수 있는 구조가 필요함.

---

## 2. 오늘 주요 진행 내용

### 2.1 데이터 수집 파이프라인(ETL)
- Airflow DAG를 구성해, 매일 새벽 2시에 다음 데이터를 집계하도록 설계.
  - STT/TTS 정확도·실패율
  - 립싱 오차, 처리 시간(엔드투엔드)
  - 사용자 만족도 설문 결과, 교육 참여 현황 등
- 원천 로그(`data/runs/*`, `surveys/forms`)를 Delta Lake 포맷으로 정리해 이후 재분석이 가능하도록 구성.

### 2.2 지표 계산 로직
- 최근 7일 이동 평균과 95퍼센타일 기반으로
  - 품질 점수
  - 처리 시간 SLO
  를 계산하는 로직을 정리.
- IRIS에 제출한 공식 KPI(품질/속도/커버리지)에 매핑하는 설정 파일 `metrics/kpi_mapping.yaml` 정리.

### 2.3 시각화·경보 설정
- Grafana 대시보드 10여 개 패널(품질, 속도, 오류, 교육 진행상태 등) 구성.
- Alertmanager에
  - 품질 지표 10% 이상 급락
  - 처리 시간 SLO 위반 지속
  시 슬랙 채널로 알림이 가도록 규칙 설정.

### 2.4 검증
- 지난 14일치 데이터를 리플레이하여
  - 지표 계산의 정확성
  - 경보 발생 조건
  을 검증.
- 기존 수동 보고와 비교해 큰 차이가 없는지 확인.

---

## 3. 책임자 관점 의사결정·리스크

- **결정**: 주간·월간 보고는 이 자동 대시보드에서 캡처·요약하는 방식으로 표준화.
- **리스크**:
  - 설문 응답 누락 등으로 만족도 지표가 Null이 되는 경우, 잘못된 경보가 발생할 수 있음 → 최소 응답 수 미만일 경우 "데이터 부족" 상태로 처리하는 예외 로직을 추가(11/12 예정).
  - Grafana 권한 설정이 미비하면 불필요한 정보 노출 가능 → SSO·역할 기반 권한 설정을 11/13까지 적용.

---

## 4. 산출물·지표

- KPI 갱신 주기: 주 1회 수동 → **하루 1회 자동**.
- 경보 감지 시간: 평균 6시간 → 약 15분 수준으로 단축.
- 주간 수동 보고 작성 시간: 주당 약 3시간 절감 예상.

---

## 5. 다음 액션 (책임 관점)

1. 11/12: 만족도 Null 처리 로직 추가 및 UX 지표와 연동.
2. 11/13: Grafana SSO·역할 기반 권한 도입, IRIS 최종 검토 회의에서 대시보드 시연.

---

## 6. 참고 자료

- `docs/metrics/quality_dashboard_spec_v2.pdf`
- Continuous Delivery Metrics/Alerting Best Practices 자료.
