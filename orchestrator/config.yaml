steps:
  audio_extract:
    - python
    - "{modules_dir}/audio_extractor/run.py"
    - --input
    - "{input_media}"
    - --output
    - "{audio_output}"
  demucs:  # optional: only used in pipelines that include it
    - python
    - "{modules_dir}/experimental/demucs_run.py"
    - --input
    - "{audio_output}"
    - --output
    - "{audio_output}"
  vad_stub:  # optional: placeholder VAD stage
    - python
    - "{modules_dir}/experimental/vad_stub.py"
    - --input
    - "{audio_output}"
    - --output
    - "{audio_output}"
  tensorrt_export:  # optional: placeholder TensorRT export stage
    - python
    - "{modules_dir}/experimental/tensorrt_export_stub.py"
    - --input
    - "{modules_dir}"
    - --output
    - "{run_dir}"
  feature_extract:  # optional: extract audio features (MFCC, pitch, formants, wavelet)
    - python
    - "{modules_dir}/feature_extractor/audio_features.py"
    - --input
    - "{audio_output}"
    - --output
    - "{features_output}"
    - --sample_rate
    - "16000"
  stt:
    - python
    - "{modules_dir}/stt_whisper/run.py"
    - --input
    - "{audio_output}"
    - --output
    - "{stt_output}"
    - --config
    - "{modules_dir}/stt_whisper/config/settings.yaml"
  text_process:
    - python
    - "{modules_dir}/text_processor/run.py"
    - --input
    - "{stt_output}"
    - --output
    - "{text_output}"
    - --config
    - "{modules_dir}/text_processor/config/settings.yaml"
  tts:
    - python
    - "{modules_dir}/tts_vallex/run.py"
    - --input
    - "{text_output}"
    - --output
    - "{tts_output}"
    - --config
    - "{modules_dir}/tts_vallex/config/settings.yaml"
  tts_backup:
    - python
    - "{modules_dir}/tts_xtts/run.py"
    - --input
    - "{text_output}"
    - --output
    - "{xtts_output}"
    - --config
    - "{modules_dir}/tts_xtts/config/settings.yaml"
  rvc:
    - python
    - "{modules_dir}/voice_conversion_rvc/run.py"
    - --input
    - "{tts_output}"
    - --output
    - "{rvc_output}"
    - --config
    - "{modules_dir}/voice_conversion_rvc/config/settings.yaml"
  lipsync:
    - python
    - "{modules_dir}/lipsync_wav2lip/run.py"
    - --video
    - "{input_media}"
    - --audio
    - "{rvc_output}"
    - --output
    - "{lipsync_output}"
    - --config
    - "{modules_dir}/lipsync_wav2lip/config/settings.yaml"
